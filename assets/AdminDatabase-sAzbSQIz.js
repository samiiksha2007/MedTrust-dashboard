import{c as u,r as n,j as e,D as T,b as j,d as L,e as D,f as E,C as A}from"./index-58bNE4WQ.js";const P=u("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),R=u("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),q=u("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),B=x=>{const s=String(x).toLowerCase();return s.includes("high")||s.includes("1")||s.includes("yes")||s.includes("positive")||s.includes("tumor")&&!s.includes("no_tumor")?{text:"Detected",color:"bg-red-500/20 text-red-400 border-red-500/30",icon:j}:{text:"Normal",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",icon:A}},l=25,M=()=>{const[x,s]=n.useState([]),[N,w]=n.useState(!0),[r,v]=n.useState(""),[m,k]=n.useState("All"),[a,g]=n.useState(1);n.useEffect(()=>{(async()=>{try{const i=(await L(D(E,"predictions"))).docs.map(o=>({id:o.id,...o.data()})).sort((o,p)=>{var b,f;const S=((b=o.timestamp)==null?void 0:b.seconds)||0;return(((f=p.timestamp)==null?void 0:f.seconds)||0)-S});s(i)}catch(c){console.error("Error fetching predictions:",c)}finally{w(!1)}})()},[]);const C=["All",...new Set(x.map(t=>t.predictionType).filter(Boolean))],d=x.filter(t=>{const c=r===""||(t.userEmail||"").toLowerCase().includes(r.toLowerCase())||(t.predictionType||"").toLowerCase().includes(r.toLowerCase())||(t.blockchainHash||"").toLowerCase().includes(r.toLowerCase()),i=m==="All"||t.predictionType===m;return c&&i}),h=Math.ceil(d.length/l),y=d.slice((a-1)*l,a*l);return n.useEffect(()=>{g(1)},[r,m]),N?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading database..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Firebase Database"}),e.jsx("p",{className:"text-gray-400",children:"Structured view of all prediction records. This view is read-only."})]}),e.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search by email, type, or hash...",value:r,onChange:t=>v(t.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-xl pl-10 pr-4 py-3 text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),e.jsx("select",{value:m,onChange:t=>k(t.target.value),className:"bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none cursor-pointer min-w-[180px]",children:C.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsxs("span",{children:[d.length," records found"]}),r&&e.jsx("span",{className:"text-indigo-400",children:"• Filtered"})]})]}),e.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"#"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"User Email"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Prediction Type"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Result"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Accuracy"}),e.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Blockchain Hash"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800/50",children:y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-16 text-center text-gray-500",children:"No records match your search."})}):y.map((t,c)=>{var p;const i=B(t.result),o=(a-1)*l+c+1;return e.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 font-mono",children:o}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-300 whitespace-nowrap",children:(p=t.timestamp)!=null&&p.seconds?new Date(t.timestamp.seconds*1e3).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"—"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-200 font-medium",children:t.userEmail||"—"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex px-3 py-1 rounded-lg text-xs font-medium bg-indigo-500/15 text-indigo-400 border border-indigo-500/20",children:t.predictionType||"—"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-lg text-xs font-medium border ${i.color}`,children:[e.jsx(i.icon,{className:"w-3 h-3"}),i.text]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-300 font-medium",children:t.accuracy||"—"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("code",{className:"text-xs bg-gray-800 px-2 py-1 rounded-md text-gray-400 font-mono border border-gray-700",children:t.blockchainHash?`${t.blockchainHash.substring(0,16)}...`:"—"})})]},t.id)})})]})}),h>1&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-800",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",(a-1)*l+1," to ",Math.min(a*l,d.length)," of ",d.length]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>g(t=>Math.max(1,t-1)),disabled:a===1,className:"p-2 rounded-lg bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-all",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-gray-400 px-3",children:["Page ",a," of ",h]}),e.jsx("button",{onClick:()=>g(t=>Math.min(h,t+1)),disabled:a===h,className:"p-2 rounded-lg bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-all",children:e.jsx(R,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl px-5 py-3",children:[e.jsx(j,{className:"w-5 h-5 text-amber-400 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-amber-300",children:["This view is ",e.jsx("strong",{children:"read-only"}),". To modify records, please use the Firebase Console directly."]})]})]})};export{M as default};
